@tailwind base;
@tailwind components;
@tailwind utilities;

@layer base {
  :root {
    /* Background - Light */
    --background: 215 35% 97%;
    --background-secondary: 218 28% 93%;
    --background-tertiary: 220 22% 88%;
    --background-elevated: 220 20% 82%;

    /* Brand - EventsCV Palette */
    --brand-primary: 244 90% 70%;
    --brand-secondary: 244 89% 75%;
    --brand-accent: 36 94% 62%;
    --brand-light: 244 88% 82%;
    --brand-muted: 217 11% 65%;
    --brand-dark: 244 65% 58%;

    /* Text */
    --foreground: 222 47% 11%;
    --foreground-secondary: 220 26% 18%;
    --foreground-muted: 220 19% 28%;

    /* Glass */
    --glass: 0 0% 100% / 0.82;
    --glass-strong: 0 0% 100% / 0.9;
    --glass-border: 220 15% 80% / 0.85;
    --border-color: 220 15% 78%;

    /* Status */
    --success: 160 84% 39%;
    --success-light: 160 84% 45%;
    --success-dark: 160 84% 32%;
    --warning: 36 94% 62%;
    --warning-light: 36 94% 68%;
    --warning-dark: 36 94% 54%;
    --error: 0 84% 60%;
    --error-light: 0 84% 65%;
    --error-dark: 0 84% 52%;

    /* SIDEBAR Light Mode - Mapped to new palette */
    --sidebar: 0 0% 100%;
    --sidebar-hover: 218 28% 93%;
    /* matches --background-secondary */
    --sidebar-active: 244 90% 70%;
    /* matches --brand-primary, but usually used with opacity */

    --sidebar-width: 280px;
    --sidebar-collapsed-width: 80px;
    --header-height: 64px;
    --font-body: 'Inter', system-ui, sans-serif;

    /* Legacy/Compat variables if needed by existing components */
    --primary: 244 90% 70%;
    /* Mapped to brand-primary */
  }

  .dark {
    /* Background - Dark Gray */
    --background: 222 47% 11%;
    --background-secondary: 220 26% 16%;
    --background-tertiary: 217 19% 27%;
    --background-elevated: 215 14% 34%;

    /* Brand - EventsCV Palette */
    --brand-primary: 244 90% 70%;
    --brand-secondary: 244 89% 75%;
    --brand-accent: 36 94% 62%;
    --brand-light: 244 88% 82%;
    --brand-muted: 217 11% 65%;
    --brand-dark: 244 65% 58%;

    /* Text */
    --foreground: 0 0% 100%;
    --foreground-secondary: 218 11% 65%;
    --foreground-muted: 220 9% 60%;

    /* Glass */
    --glass: 0 0% 100% / 0.07;
    --glass-strong: 0 0% 100% / 0.12;
    --glass-border: 0 0% 100% / 0.15;
    --border-color: 0 0% 100% / 0.16;

    /* Status */
    --success: 160 84% 39%;
    --success-light: 160 84% 45%;
    --success-dark: 160 84% 32%;
    --warning: 36 94% 62%;
    --warning-light: 36 94% 68%;
    --warning-dark: 36 94% 54%;
    --error: 0 84% 60%;
    --error-light: 0 84% 65%;
    --error-dark: 0 84% 52%;

    /* SIDEBAR Dark Mode - Mapped to new palette */
    --sidebar: 220 26% 16%;
    /* matches --background-secondary */
    --sidebar-hover: 217 19% 27%;
    /* matches --background-tertiary */
    --sidebar-active: 244 90% 70%;
    /* matches --brand-primary */

    /* Legacy/Compat variables */
    --primary: 244 90% 70%;
  }

  html {
    @apply scroll-smooth antialiased;
  }

  body {
    @apply bg-background text-[hsl(var(--foreground))] font-body;
  }

  /* Selection Color */
  ::selection {
    @apply bg-brand-primary/30 text-[hsl(var(--foreground))];
  }

  :focus-visible {
    @apply outline-none ring-2 ring-brand-primary ring-offset-2 ring-offset-background;
  }
}

@layer components {

  /* Dashboard Layout */
  .dashboard-layout {
    @apply flex min-h-screen bg-gradient-to-br from-background via-background to-background-secondary text-[hsl(var(--foreground))];
  }

  .dashboard-sidebar {
    @apply fixed left-0 top-0 bottom-0 w-[var(--sidebar-width)] bg-gradient-to-b from-sidebar to-background-secondary/50 backdrop-blur-xl border-r border-[hsl(var(--primary))/0.15] flex flex-col z-40 transition-all duration-300 shadow-2xl;
  }

  .dashboard-sidebar.collapsed {
    @apply w-[var(--sidebar-collapsed-width)];
  }

  .dashboard-main {
    @apply ml-[var(--sidebar-width)] flex-1 min-h-screen transition-all duration-300;
  }

  .dashboard-main.expanded {
    @apply ml-[var(--sidebar-collapsed-width)];
  }

  .dashboard-header {
    @apply sticky top-0 h-[var(--header-height)] bg-background/60 backdrop-blur-2xl border-b border-[hsl(var(--primary))/0.12] flex items-center justify-between px-6 z-30 shadow-sm;
  }

  .dashboard-content {
    @apply p-6 space-y-6;
  }

  /* Sidebar Navigation */
  .sidebar-logo {
    @apply h-[var(--header-height)] flex items-center px-6 border-b border-[hsl(var(--primary))/0.12] bg-gradient-to-r from-brand-primary/5 to-transparent;
  }

  .sidebar-nav {
    @apply flex-1 py-4 px-3 space-y-1.5 overflow-y-auto;
  }

  .sidebar-link {
    @apply flex items-center gap-3 px-4 py-3 rounded-xl text-[hsl(var(--foreground-secondary))] transition-all duration-300 hover:bg-gradient-to-r hover:from-brand-primary/10 hover:to-transparent hover:text-brand-primary hover:translate-x-1 hover:shadow-sm relative overflow-hidden;
  }

  .sidebar-link::before {
    content: '';
    @apply absolute left-0 top-1/2 -translate-y-1/2 w-1 h-0 bg-brand-primary rounded-r-full transition-all duration-300;
  }

  .sidebar-link:hover::before {
    @apply h-8;
  }

  .sidebar-link.active {
    @apply bg-gradient-to-r from-brand-primary/15 to-brand-primary/5 text-brand-primary border-l-4 border-brand-primary pl-3 shadow-lg shadow-brand-primary/10;
  }

  .sidebar-link.active::before {
    @apply h-8;
  }

  .sidebar-section {
    @apply pt-6 pb-2;
  }

  .sidebar-section-title {
    @apply px-4 text-xs font-bold uppercase tracking-wider text-[hsl(var(--foreground-muted))] bg-gradient-to-r from-brand-primary/10 to-transparent py-2 rounded-lg mb-2;
  }

  /* Stats Cards */
  .stat-card {
    @apply bg-gradient-to-br from-background-secondary to-background-tertiary/50 rounded-2xl p-6 border border-[hsl(var(--primary))/0.15] transition-all duration-500 hover:border-brand-primary/30 hover:shadow-2xl hover:shadow-brand-primary/5 hover:-translate-y-1 hover:scale-[1.02] backdrop-blur-sm relative overflow-hidden;
  }

  .stat-card::before {
    content: '';
    @apply absolute inset-0 bg-gradient-to-br from-brand-primary/5 via-transparent to-transparent opacity-0 transition-opacity duration-500;
  }

  .stat-card:hover::before {
    @apply opacity-100;
  }

  .stat-card-value {
    @apply text-4xl font-bold bg-gradient-to-r from-brand-primary to-brand-secondary bg-clip-text text-transparent relative z-10;
  }

  .stat-card-label {
    @apply text-sm font-medium text-[hsl(var(--foreground-secondary))] mt-2 relative z-10;
  }

  .stat-card-trend {
    @apply flex items-center gap-1.5 text-sm mt-3 font-semibold relative z-10;
  }

  .stat-card-trend.up {
    @apply text-success;
  }

  .stat-card-trend.down {
    @apply text-error;
  }

  /* Data Tables */
  .data-table {
    @apply w-full rounded-2xl overflow-hidden bg-gradient-to-br from-background-secondary to-background-tertiary/30;
  }

  .data-table th {
    @apply text-left text-xs font-bold uppercase tracking-wider text-[hsl(var(--foreground-secondary))] py-4 px-6 border-b-2 border-brand-primary/20 bg-gradient-to-r from-brand-primary/5 to-transparent;
  }

  .data-table td {
    @apply py-4 px-6 border-b border-[hsl(var(--primary))/0.08] text-sm text-[hsl(var(--foreground))] transition-colors duration-200;
  }

  .data-table tbody tr {
    @apply transition-all duration-300 hover:bg-gradient-to-r hover:from-brand-primary/5 hover:to-transparent hover:shadow-sm;
  }

  /* Buttons */
  .btn {
    @apply inline-flex items-center justify-center gap-2 font-semibold rounded-xl transition-all duration-300 disabled:opacity-50 disabled:cursor-not-allowed px-4 py-2.5 relative overflow-hidden;
  }

  .btn-primary {
    @apply btn bg-gradient-to-r from-brand-primary to-brand-secondary text-white shadow-lg shadow-brand-primary/30 hover:shadow-xl hover:shadow-brand-primary/40 hover:scale-105 active:scale-95;
  }

  .btn-primary::before {
    content: '';
    @apply absolute inset-0 bg-white/20 translate-y-full transition-transform duration-300;
  }

  .btn-primary:hover::before {
    @apply translate-y-0;
  }

  .btn-secondary {
    @apply btn bg-background-tertiary text-[hsl(var(--foreground))] border-2 border-[hsl(var(--primary))/0.15] hover:bg-background-elevated hover:border-brand-primary/30 hover:shadow-lg;
  }

  .btn-ghost {
    @apply btn text-[hsl(var(--foreground-secondary))] hover:text-brand-primary hover:bg-brand-primary/10;
  }

  .btn-danger {
    @apply btn bg-gradient-to-r from-error/15 to-error/10 text-error border-2 border-error/30 hover:bg-gradient-to-r hover:from-error/25 hover:to-error/15 hover:shadow-lg hover:shadow-error/20;
  }

  /* Forms */
  .form-group {
    @apply space-y-2.5;
  }

  .form-label {
    @apply block text-sm font-semibold text-[hsl(var(--foreground))] mb-1.5;
  }

  .form-input {
    @apply w-full px-4 py-3 rounded-xl bg-gradient-to-br from-background-secondary to-background-tertiary/50 border-2 border-[hsl(var(--primary))/0.12] text-[hsl(var(--foreground))] placeholder:text-[hsl(var(--foreground-muted))] focus:border-brand-primary focus:ring-2 focus:ring-brand-primary/20 transition-all duration-300 hover:border-[hsl(var(--primary))/0.2] shadow-sm;
  }

  .form-select {
    @apply form-input appearance-none bg-no-repeat bg-right pr-10 cursor-pointer;
    background-image: url("data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' fill='none' viewBox='0 0 20 20'%3e%3cpath stroke='%238b5cf6' stroke-linecap='round' stroke-linejoin='round' stroke-width='2' d='M6 8l4 4 4-4'/%3e%3c/svg%3e");
    background-position: right 0.75rem center;
    background-size: 1.5em 1.5em;
  }

  .form-textarea {
    @apply form-input resize-none min-h-[120px];
  }

  .form-error {
    @apply text-sm text-error mt-1.5 font-medium flex items-center gap-1;
  }

  /* Cards */
  .card {
    @apply bg-gradient-to-br from-background-secondary to-background-tertiary/40 rounded-2xl border border-[hsl(var(--primary))/0.15] shadow-lg backdrop-blur-sm transition-all duration-300 hover:shadow-xl hover:border-[hsl(var(--primary))/0.25];
  }

  .card-header {
    @apply px-6 py-5 border-b border-[hsl(var(--primary))/0.12] flex items-center justify-between bg-gradient-to-r from-brand-primary/5 to-transparent;
  }

  .card-title {
    @apply font-bold text-lg text-[hsl(var(--foreground))];
  }

  .card-body {
    @apply p-6;
  }

  /* Badges */
  .badge {
    @apply inline-flex items-center px-3 py-1 rounded-full text-xs font-semibold transition-all duration-300;
  }

  .badge-success {
    @apply badge bg-gradient-to-r from-success/20 to-success/10 text-success border border-success/30 shadow-sm;
  }

  .badge-warning {
    @apply badge bg-gradient-to-r from-warning/20 to-warning/10 text-warning border border-warning/30 shadow-sm;
  }

  .badge-error {
    @apply badge bg-gradient-to-r from-error/20 to-error/10 text-error border border-error/30 shadow-sm;
  }

  .badge-info {
    @apply badge bg-gradient-to-r from-brand-primary/20 to-brand-primary/10 text-brand-primary border border-brand-primary/30 shadow-sm;
  }

  /* Skeleton */
  .skeleton {
    @apply bg-gradient-to-r from-background-tertiary via-background-elevated to-background-tertiary animate-pulse rounded-lg bg-[length:200%_100%];
  }

  /* Loading Spinner */
  .spinner {
    @apply inline-block w-5 h-5 border-2 border-brand-primary/30 border-t-brand-primary rounded-full animate-spin;
  }

  /* Glassmorphism Effect */
  .glass {
    @apply bg-white/10 dark:bg-black/10 backdrop-blur-xl border border-white/20 dark:border-white/10;
  }

  /* Animated Gradient Background */
  .gradient-animate {
    @apply bg-gradient-to-r from-brand-primary via-brand-secondary to-brand-primary bg-[length:200%_auto] animate-[gradient_3s_linear_infinite];
  }

  /* Smooth Reveal Animation */
  .reveal {
    @apply opacity-0 translate-y-4 transition-all duration-500;
  }

  .reveal.active {
    @apply opacity-100 translate-y-0;
  }

  /* Pulse Effect */
  .pulse-glow {
    @apply animate-[pulse_2s_cubic-bezier(0.4,0,0.6,1)_infinite];
    box-shadow: 0 0 20px rgba(139, 92, 246, 0.3);
  }

  /* Dropdown Menus */
  .dropdown-menu {
    @apply absolute right-0 top-full mt-2 min-w-[200px] bg-gradient-to-br from-background-secondary to-background-tertiary/50 backdrop-blur-xl border border-[hsl(var(--border-color))] rounded-2xl shadow-2xl overflow-hidden;
  }

  .dropdown-item {
    @apply flex items-center gap-3 px-4 py-3 text-sm text-[hsl(var(--foreground))] hover:bg-gradient-to-r hover:from-brand-primary/10 hover:to-transparent transition-colors cursor-pointer;
  }

  .dropdown-divider {
    @apply border-t border-[hsl(var(--border-color))] my-1;
  }

  .empty-state {
    @apply flex flex-col items-center justify-center text-center;
  }
}

/* Custom Animations */
@keyframes gradient {
  0%, 100% {
    background-position: 0% 50%;
  }
  50% {
    background-position: 100% 50%;
  }
}

@keyframes shimmer {
  0% {
    background-position: -200% center;
  }
  100% {
    background-position: 200% center;
  }
}

/* Smooth Scrollbar */
::-webkit-scrollbar {
  width: 8px;
  height: 8px;
}

::-webkit-scrollbar-track {
  @apply bg-background-secondary rounded-full;
}

::-webkit-scrollbar-thumb {
  @apply bg-brand-primary/30 rounded-full hover:bg-brand-primary/50 transition-colors;
}

/* Selection with gradient */
::selection {
  @apply bg-brand-primary/40;
}