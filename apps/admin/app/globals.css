@tailwind base;
@tailwind components;
@tailwind utilities;

@layer base {
  :root {
    /* Background - Light */
    --background: 215 35% 97%;
    --background-secondary: 218 28% 93%;
    --background-tertiary: 220 22% 88%;
    --background-elevated: 220 20% 82%;

    /* Brand - EventsCV Palette */
    --brand-primary: 244 90% 70%;
    --brand-secondary: 244 89% 75%;
    --brand-accent: 36 94% 62%;
    --brand-light: 244 88% 82%;
    --brand-muted: 217 11% 65%;
    --brand-dark: 244 65% 58%;

    /* Text */
    --foreground: 222 35% 12%;
    --foreground-secondary: 220 20% 28%;
    --foreground-muted: 220 12% 38%;

    /* Glass */
    --glass: 0 0% 100% / 0.82;
    --glass-strong: 0 0% 100% / 0.9;
    --glass-border: 220 15% 80% / 0.85;
    --border-color: 220 15% 78%;

    /* Status */
    --success: 160 84% 39%;
    --success-light: 160 84% 45%;
    --success-dark: 160 84% 32%;
    --warning: 36 94% 62%;
    --warning-light: 36 94% 68%;
    --warning-dark: 36 94% 54%;
    --error: 0 84% 60%;
    --error-light: 0 84% 65%;
    --error-dark: 0 84% 52%;

    /* SIDEBAR Light Mode - Mapped to new palette */
    --sidebar: 0 0% 100%;
    --sidebar-hover: 218 28% 93%;
    /* matches --background-secondary */
    --sidebar-active: 244 90% 70%;
    /* matches --brand-primary, but usually used with opacity */

    --sidebar-width: 280px;
    --sidebar-collapsed-width: 80px;
    --header-height: 64px;
    --font-body: 'Inter', system-ui, sans-serif;

    /* Legacy/Compat variables if needed by existing components */
    --primary: 244 90% 70%;
    /* Mapped to brand-primary */
  }

  .dark {
    /* Background - Dark Gray */
    --background: 222 47% 11%;
    --background-secondary: 220 26% 16%;
    --background-tertiary: 217 19% 27%;
    --background-elevated: 215 14% 34%;

    /* Brand - EventsCV Palette */
    --brand-primary: 244 90% 70%;
    --brand-secondary: 244 89% 75%;
    --brand-accent: 36 94% 62%;
    --brand-light: 244 88% 82%;
    --brand-muted: 217 11% 65%;
    --brand-dark: 244 65% 58%;

    /* Text */
    --foreground: 0 0% 100%;
    --foreground-secondary: 218 11% 65%;
    --foreground-muted: 220 9% 60%;

    /* Glass */
    --glass: 0 0% 100% / 0.07;
    --glass-strong: 0 0% 100% / 0.12;
    --glass-border: 0 0% 100% / 0.15;
    --border-color: 0 0% 100% / 0.16;

    /* Status */
    --success: 160 84% 39%;
    --success-light: 160 84% 45%;
    --success-dark: 160 84% 32%;
    --warning: 36 94% 62%;
    --warning-light: 36 94% 68%;
    --warning-dark: 36 94% 54%;
    --error: 0 84% 60%;
    --error-light: 0 84% 65%;
    --error-dark: 0 84% 52%;

    /* SIDEBAR Dark Mode - Mapped to new palette */
    --sidebar: 220 26% 16%;
    /* matches --background-secondary */
    --sidebar-hover: 217 19% 27%;
    /* matches --background-tertiary */
    --sidebar-active: 244 90% 70%;
    /* matches --brand-primary */

    /* Legacy/Compat variables */
    --primary: 244 90% 70%;
  }

  html {
    @apply scroll-smooth antialiased;
  }

  body {
    @apply bg-background text-[hsl(var(--foreground))] font-body;
  }

  /* Selection Color */
  ::selection {
    @apply bg-brand-primary/30 text-[hsl(var(--foreground))];
  }

  :focus-visible {
    @apply outline-none ring-2 ring-brand-primary ring-offset-2 ring-offset-background;
  }
}

@layer components {

  /* Dashboard Layout */
  .dashboard-layout {
    @apply flex min-h-screen bg-background text-[hsl(var(--foreground))];
  }

  .dashboard-sidebar {
    @apply fixed left-0 top-0 bottom-0 w-[var(--sidebar-width)] bg-sidebar border-r border-[hsl(var(--primary))/0.1] flex flex-col z-40 transition-all duration-300;
  }

  .dashboard-sidebar.collapsed {
    @apply w-[var(--sidebar-collapsed-width)];
  }

  .dashboard-main {
    @apply ml-[var(--sidebar-width)] flex-1 min-h-screen transition-all duration-300;
  }

  .dashboard-main.expanded {
    @apply ml-[var(--sidebar-collapsed-width)];
  }

  .dashboard-header {
    @apply sticky top-0 h-[var(--header-height)] bg-background/80 backdrop-blur-xl border-b border-[hsl(var(--primary))/0.1] flex items-center justify-between px-6 z-30;
  }

  .dashboard-content {
    @apply p-6;
  }

  /* Sidebar Navigation */
  .sidebar-logo {
    @apply h-[var(--header-height)] flex items-center px-6 border-b border-[hsl(var(--primary))/0.1];
  }

  .sidebar-nav {
    @apply flex-1 py-4 px-3 space-y-1 overflow-y-auto;
  }

  .sidebar-link {
    @apply flex items-center gap-3 px-4 py-3 rounded-xl text-gray-500 dark:text-zinc-400 transition-all duration-200 hover:bg-sidebar-hover hover:text-[hsl(var(--primary))];
  }

  .sidebar-link.active {
    @apply bg-brand-primary/10 text-brand-primary border border-brand-primary/20;
  }

  .sidebar-section {
    @apply pt-6 pb-2;
  }

  .sidebar-section-title {
    @apply px-4 text-xs font-semibold uppercase tracking-wider text-gray-400 dark:text-zinc-500;
  }

  /* Stats Cards */
  .stat-card {
    @apply bg-background-secondary rounded-2xl p-6 border border-[hsl(var(--primary))/0.1] transition-all duration-300 hover:border-[hsl(var(--primary))/0.2] shadow-sm;
  }

  .stat-card-value {
    @apply text-3xl font-bold text-[hsl(var(--foreground))];
  }

  .stat-card-label {
    @apply text-sm text-gray-500 dark:text-zinc-400 mt-1;
  }

  .stat-card-trend {
    @apply flex items-center gap-1 text-sm mt-2;
  }

  .stat-card-trend.up {
    @apply text-success;
  }

  .stat-card-trend.down {
    @apply text-error;
  }

  /* Data Tables */
  .data-table {
    @apply w-full;
  }

  .data-table th {
    @apply text-left text-xs font-semibold uppercase tracking-wider text-gray-500 dark:text-zinc-500 py-3 px-4 border-b border-[hsl(var(--primary))/0.1];
  }

  .data-table td {
    @apply py-4 px-4 border-b border-[hsl(var(--primary))/0.1] text-sm text-[hsl(var(--foreground))];
  }

  .data-table tr:hover td {
    @apply bg-[hsl(var(--primary))/0.05];
  }

  /* Buttons */
  .btn {
    @apply inline-flex items-center justify-center gap-2 font-medium rounded-xl transition-all duration-200 disabled:opacity-50 disabled:cursor-not-allowed;
  }

  .btn-primary {
    @apply btn bg-brand-primary text-white hover:bg-brand-primary/90 shadow-md shadow-brand-primary/20;
  }

  .btn-secondary {
    @apply btn bg-background-tertiary text-[hsl(var(--foreground))] border border-[hsl(var(--primary))/0.1] hover:bg-background-elevated hover:border-[hsl(var(--primary))/0.2];
  }

  .btn-ghost {
    @apply btn text-gray-500 dark:text-zinc-400 hover:text-[hsl(var(--foreground))] hover:bg-background-tertiary;
  }

  .btn-danger {
    @apply btn bg-error/10 text-error border border-error/20 hover:bg-error/20;
  }

  /* Forms */
  .form-group {
    @apply space-y-2;
  }

  .form-label {
    @apply block text-sm font-medium text-[hsl(var(--foreground))];
  }

  .form-input {
    @apply w-full px-4 py-3 rounded-xl bg-background-secondary border border-[hsl(var(--primary))/0.1] text-[hsl(var(--foreground))] placeholder:text-gray-400 dark:placeholder:text-zinc-500 focus:border-brand-primary focus:ring-1 focus:ring-brand-primary transition-all duration-200;
  }

  .form-select {
    @apply form-input appearance-none bg-no-repeat bg-right pr-10 cursor-pointer;
    background-image: url("data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' fill='none' viewBox='0 0 20 20'%3e%3cpath stroke='%236b7280' stroke-linecap='round' stroke-linejoin='round' stroke-width='1.5' d='M6 8l4 4 4-4'/%3e%3c/svg%3e");
    background-position: right 0.75rem center;
    background-size: 1.5em 1.5em;
  }

  .form-textarea {
    @apply form-input resize-none;
  }

  .form-error {
    @apply text-sm text-error mt-1;
  }

  /* Cards */
  .card {
    @apply bg-background-secondary rounded-2xl border border-[hsl(var(--primary))/0.1] shadow-sm;
  }

  .card-header {
    @apply px-6 py-4 border-b border-[hsl(var(--primary))/0.1] flex items-center justify-between;
  }

  .card-title {
    @apply font-semibold text-[hsl(var(--foreground))];
  }

  .card-body {
    @apply p-6;
  }

  /* Badges - Update needed to work with new variables or keep as utilities */
  /* Skeleton */
  .skeleton {
    @apply bg-background-tertiary animate-pulse rounded-lg;
  }
}